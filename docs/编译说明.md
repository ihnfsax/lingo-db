# 编译说明

## 编译 LLVM

```bash
cd llvm-project
cmake -S llvm -B build -G Ninja \
   -DLLVM_ENABLE_PROJECTS="clang;clang-tools-extra;lldb;mlir;lld" \
   -DCMAKE_BUILD_TYPE=Release \
   -DLLVM_BUILD_EXAMPLES=ON \
   -DLLVM_TARGETS_TO_BUILD="Native;NVPTX;AMDGPU" \
   -DLLVM_CCACHE_BUILD=ON \
   -DLLVM_INSTALL_UTILS=ON \
   -DLLVM_ENABLE_ASSERTIONS=ON \
   -DCMAKE_C_COMPILER=clang \
   -DCMAKE_CXX_COMPILER=clang++ \
   -DLLVM_USE_LINKER=lld \
   -DCMAKE_EXPORT_COMPILE_COMMANDS=ON
cmake --build ./build
```

## 编译 LINGO-DB

安装依赖：

- arrow: https://arrow.apache.org/install/
- opentbb: https://github.com/oneapi-src/oneTBB/releases/tag/v2021.11.0 解压到 oneapi-tbb 目录下。

找不到 opentbb 时，可以在 CMakeLists.txt 中添加：

```cmake
set(TBB_LIB_PATH "${CMAKE_CURRENT_LIST_DIR}/oneapi-tbb/lib/intel64/gcc4.8")
set(TBB_INCLUDE_DIR "${CMAKE_CURRENT_LIST_DIR}/oneapi-tbb/include")
```

编译：

```bash
cmake -S . -B build -G Ninja \
    -DCMAKE_EXPORT_COMPILE_COMMANDS=ON \
    -DCMAKE_BUILD_TYPE=Debug
cmake --build ./build
```

如果找不到 LLVM，请在 CMakeLists.txt 中添加：

```cmake
list(APPEND CMAKE_PREFIX_PATH "${CMAKE_CURRENT_LIST_DIR}/llvm-project/build")
```
